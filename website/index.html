<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consciousness Study</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">Consciousness Study</div>
        <div class="nav-links">
            <a href="#brain" class="active">Brain</a>
            <a href="#drugs">Compounds</a>
            <a href="#receptors">Receptors</a>
            <a href="#effects">Effects</a>
            <a href="#sources">Sources</a>
        </div>
    </nav>

    <main>
        <!-- 3D Brain Section -->
        <section id="brain" class="section active">
            <div class="brain-container">
                <div id="brainbrowser-wrapper">
                    <div id="brainbrowser"></div>
                    <div id="loading-indicator">Loading brain model...</div>
                </div>
                <div class="brain-controls">
                    <h3>Brain Region Viewer</h3>
                    <div class="control-group">
                        <label>Select Effect:</label>
                        <select id="effect-select">
                            <option value="">Choose effect...</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Select Receptor:</label>
                        <select id="receptor-select">
                            <option value="">Choose receptor...</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>View Controls:</label>
                        <button id="btn-wireframe">Wireframe</button>
                        <button id="btn-labels">Labels</button>
                        <button id="btn-reset">Reset View</button>
                    </div>
                    <div id="region-info"></div>
                </div>
            </div>
            <div class="legend">
                <h4>Activity Level</h4>
                <div class="legend-scale">
                    <span>Low</span>
                    <div class="gradient"></div>
                    <span>High</span>
                </div>
            </div>
        </section>

        <!-- Drugs Section -->
        <section id="drugs" class="section">
            <h2>Psychoactive Compounds</h2>
            <div class="filters">
                <button class="filter-btn active" data-class="all">All</button>
                <button class="filter-btn" data-class="psychedelic">Psychedelics</button>
                <button class="filter-btn" data-class="dissociative">Dissociatives</button>
                <button class="filter-btn" data-class="entactogen">Entactogens</button>
                <button class="filter-btn" data-class="cannabinoid">Cannabinoids</button>
                <button class="filter-btn" data-class="opioid">Opioids</button>
                <button class="filter-btn" data-class="stimulant">Stimulants</button>
            </div>
            <div id="drugs-grid" class="card-grid"></div>
        </section>

        <!-- Receptors Section -->
        <section id="receptors" class="section">
            <h2>Neuroreceptors</h2>
            <div id="receptors-grid" class="card-grid"></div>
        </section>

        <!-- Effects Section -->
        <section id="effects" class="section">
            <h2>Subjective Effects</h2>
            <div id="effects-grid" class="card-grid"></div>
        </section>

        <!-- Sources Section -->
        <section id="sources" class="section">
            <h2>Scientific Sources</h2>
            <div class="sources-container">
                <div class="source-category">
                    <h3>Drug Effects Data</h3>
                    <div id="drug-sources"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal for detailed view -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>
    
    <!-- BrainBrowser Core (must be first) -->
    <script src="js/brainbrowser/brainbrowser.js"></script>
    <script src="js/brainbrowser/core/tree-store.js"></script>
    <script src="js/brainbrowser/lib/config.js"></script>
    <script src="js/brainbrowser/lib/utils.js"></script>
    <script src="js/brainbrowser/lib/events.js"></script>
    <script src="js/brainbrowser/lib/loader.js"></script>
    <script src="js/brainbrowser/lib/color-map.js"></script>
    
    <!-- Surface Viewer (creates BrainBrowser.SurfaceViewer namespace) -->
    <script src="js/brainbrowser/surface-viewer.js"></script>
    
    <!-- Three.js (attaches to BrainBrowser.SurfaceViewer.THREE) -->
    <script src="js/brainbrowser/surface-viewer/lib/three.js"></script>
    
    <!-- Surface Viewer Modules (need THREE) -->
    <script src="js/brainbrowser/surface-viewer/lib/parse-intensity-data.js"></script>
    <script src="js/brainbrowser/surface-viewer/modules/annotations.js"></script>
    <script src="js/brainbrowser/surface-viewer/modules/color.js"></script>
    <script src="js/brainbrowser/surface-viewer/modules/loading.js"></script>
    <script src="js/brainbrowser/surface-viewer/modules/rendering.js"></script>
    <script src="js/brainbrowser/surface-viewer/modules/views.js"></script>
    
    <!-- Data must load before brain3d.js -->
    <script src="data.js"></script>
    <script src="data/scraped_relationships.js"></script>
    <script src="gif_index.js"></script>
    <script src="js/brain3d.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
